<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Excercise Tracker</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <h1>Hi There</h1>

    <div class="row">
      <div class="col-md-6">
        <h3>This will be the form for submitting a new user</h3>
        <form>
          <label for="new-user-input">Username</label>
          <br>
          <input type="text" id="new-user-input">
          <br>
          <hr>
          <input type="submit" id="new-user-sub">
        </form>
      </div>
      <div class="col-md-6">
        <h3>This will be the form for submitting excercise data</h3>
        <form>
          <label for="user-id">User ID</label><br>
          <input type="text" id="user-id">
          <hr>
          <label for="exercise-description">Exercise Description</label><br>
          <input type="text" id="exercise-description">
          <hr>
          <label for="exercise-duration">Exercise Duration (minutes)</label><br>
          <input type="text" id="exercise-duration">
          <hr>
          <label for="exercise-date">Date of Exercise (YYYY-MM-DD)</label><br>
          <input type="text" id="exercise-date">
          <hr>
          <input type="submit" id="exercise-entry-sub">
        </form>
      </div>
    </div>
  </div>
  <script>
    function submitData (url, data) {
      fetch(url, {
        method: "POST",
        headers: {
          "Content-Type": "application/json; charset=utf-8"
        },
        body: JSON.stringify(data)
      }).then(res => {
        return res.json();
      }).then(json => {
        console.log(json);
      })
    }
    document.querySelector("#exercise-entry-sub").addEventListener("click", (e)=>{
      e.preventDefault();
      const userId = document.querySelector("#user-id").value;
      const exerciseDescription = document.querySelector("#exercise-description").value;
      const exerciseDuration = document.querySelector("#exercise-duration").value;
      const exerciseDate = document.querySelector("#exercise-date").value;
      const outData = {userId, exerciseDescription, exerciseDuration, exerciseDate}
      submitData("/api/exercise/add", outData);
    });

    document.querySelector("#new-user-sub").addEventListener("click", (e)=>{
      e.preventDefault();
      const username = document.querySelector("#new-user-input").value;
      submitData("/api/exercise/new-user", {username});
    })
  </script>
</body>
</html>